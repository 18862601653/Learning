# 数字签名

原文链接：http://www.youdzone.com/signature.html

参考链接：http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html

假设Bob有（公钥，密钥）对，Bob把他的公钥告诉给他的朋友A，B，C。

如果A要给Bob写信，他只希望自己和Bob两个人知道信的内容，所以对信使用Bob的公钥进行加密，从而达到保密的效果。

Bob收到A的信后，用自己的私钥将信解密。只要Bob的私钥是安全的，那么信就是安全的，因为其他人没有Bob的私钥无法解密信的内容。

Bob给A回信，决定采用“数字签名”，他写完信后使用Hash函数生成信的摘要（digest）。

然后Bob对摘要使用私钥加密，生成数字签名。

Bob把这个数字签名附在信的下面一起发给A。

A受到信后，取出数字签名，用Bob的公钥解密，得到信的摘要1，从而确认这封信的确是由Bob所发。

然后再对信本身使用Hash函数生成摘要2，如果摘要2与摘要1一致，那么说明信没有被修改过。

这个过程看似完美，但是，如果C偷偷使用了A的电脑，把A的电脑上Bob的公钥换成了C自己的公钥，让A误以为C的公钥就是Bob的公钥，这样C就可以冒充Bob了。

为了防止这种现象发生，A和Bob找了个可靠的中介------证书中心（certificate authoriry，CA）为公钥做认证，CA用自己的私钥对Bob的公钥和一些相关信息加密，生成数字证书。

Bob拿到证书之后就可以放心了，写信时只需要在数字签名的同时，附上数字证书就可以了。

A收到信后只要用CA的公钥解开数字证书，就可以拿到Bob真正的公钥了，这时候就能证明数字签名是不是Bob的了。

# Https协议
Https协议是数字证书的一个实例，主要用于网页加密。

首先，客户端向服务器发送加密请求。

服务器用自己的私钥加密网页后，连同本身的数字证书，一起发送给客户端。

客户端（浏览器）的证书管理器有受信任的根证书颁发机构列表，客户端会根据这张列表检查解开数字证书的公钥是否在列表内。

如果数字证书记载的网址与正在浏览的不一致，说明这个证书可能被冒用，浏览器会发出“此网站的安全证书有问题”这样的警告。

如果数字证书不是受信任的机构所颁发，那么浏览器会发出“该站点的安全证书有问题”的警告。

如果数字证书是可靠的，客户端可以使用证书中的服务器公钥，对信息进行加密，与服务器交换加密信息。
