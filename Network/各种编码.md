# 各种编码
在数字电路中，组成一连串信息的基元是0和1，无论是CPU、DSP、MCU甚至是数字计数器中，数字电路在其中能处理的信息也只有0和1，对于任何外界的信息，计算机只能用0和1来描述。对于数字通信来说，想用0和1来传达想要传送的信息，必须通过一种特殊的约定来进行同步，这种约定就是编码。两台设备要进行有线通信，最终都是将想要传达的信息转变成一串比特流，进而在传输线上进行传输。常规数字通信为数据线+时钟线的形式，对于高速通道而言，时钟线和数据线长度的稍稍偏差，就会造成接收端无法满足数据采样的建立时间，故会导致数据出错，而最好的方式就是将时钟信号和数据信号在同一线路上传输，所以出现了一些比较特殊的编码，使得时钟和数据能够融合在一起。
## RZ编码
RZ，return to zero code，归零码。
归零码的特性是，在一个周期内，用二进制传输数据位，在数据为脉冲结束后，需要维持一段时间的低电平。即信号线上会出现三种电平：正电平、负电平和零电平。因为每位传输之后要归零，所以接受者只要在信号归零后采样即可，这样就不再需要单独的时钟信号。实际上，归零码是将时钟信号编码在了数据信号内，这样的信号也叫做自同步（self-clocking）信号，虽然节省了时钟信号线，但是大部分的数据带宽都在传输归零浪费了。
- 1正0负
- 可鉴别是否丢了信号
- 具有同步功能
- 带宽加倍
## NRZ编码
NRZ，non return to zero code,不归零编码，正电平表示1，低电平表示0，它与RZ的区别就在于它不用归零，即一个周期可以全部用来传输数据，这样传输的带宽可以完全利用，一般带有时钟线的协议都是用的NRZ编码或者差分的NRZ编码。因此，如果使用NRZ编码同时想传输高速同步数据，那么就要带时钟线，因为NRZ编码本身不能传递时钟信号，在低速异步传输可以不使用时钟线，但是在通信前，双方设备必须约定好通信波特率，如UART。
波特率：单片机或计算机在串口通信时的速率。
UART：universal asynchronous receiver/Transmitter，通用异步收发传输器。
## NRZI编码
NRZI，non return to zero inverted code，反向不归零编码，它集成了RZ和NRZ编码的优点，既能传输时钟信号，又能尽量不损失系统带宽。对于USB2.0的通信方式就是NRZI编码。信号电平翻转表示0，信号电平不变表示1。在传输数据中很少出现全1的情况，所以接收端可以根据发送端电平变化确定采样时钟频率。但是有时候依然会出现全1的情况，即信号线一直保持同一个状态，这时时钟信号就无法传输，接收端就无法同步时钟信号。解决方案就是在一定数量的1之后强行插入一个0，如果信号线状态一直持续一段时间不变，发送端强行改变信号线的状态，接收端则只需忽略这个变化。USB2.0规定7个1之后插入一个0.
## 曼彻斯特编码
曼彻斯特编码，也叫做相位编码（PE），是一个同步时钟编码技术。曼彻斯特编码与NRZI编码方式很相似，只不过它是利用信号的跳变方向来决定数据的，在位中间，信号由高向低跳变表示0，信号由低向高跳变表示1。它虽然传输了时钟信号，但是损失部分带宽，主要体现在相邻相同数据上。但对于高速数据来说，这种编码方式最优。相比NRZI编码，曼彻斯特编码不存在长时间信号状态不变导致的时钟信号丢失的情况，所以这种编码方式在以太网通信中很常用。
##总结
各种编码方式最终体现的都是一个问题：如何将时钟信号传递出去，对于任何数字通信而言，时钟信号都是首要考虑的问题，因为同步通信在接收端对数据进行采样时，都是利用发送端发送的时钟信号作为采样基准源，只有保证优质的数据信号和时钟信号被传送出来，才能保证接收端不会再亚稳定区中采样导致数据的错误。
