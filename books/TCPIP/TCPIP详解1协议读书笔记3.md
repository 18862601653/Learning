# TCPIP详解1协议读书笔记3
## RARP：逆地址解析协议
具有本地磁盘的系统引导时，一般从磁盘上的配置文件中读取IP地址，但是无盘机，如X中断或无盘工作站，需要采用其他方式获得IP地址。  
网络上的每个系统都具有唯一的硬件地址，它由网络接口生产厂家配置。无盘系统的RARP实现过程是从接口卡上读取唯一的硬件地址，然后发送一份RARP请求（一帧在网络上广播的数据），请求某个主机响应该无盘系统的IP地址（在RARP应答中）。  

RARP分组的格式与ARP分组基本一致，主要差别在于RARP请求或应答的帧类型代码为0x8035，RARP请求的操作代码是3，应答操作代码是4.  
RARP请求以广播方式传送，RARP应答单播传送。 
强制sun主机从网络上引导，在主机bsdi上运行RARP服务和tcpdump命令，用参数-e打印出硬件地址：  
![RARP请求和应答](https://github.com/Balabalabalala/Learning/blob/master/images/tcpip/2018-04-24_092213.png)  

从图中可以得知以下信息：  
- RARP请求是广播方式(第一行目标地址为ff:ff:ff:ff:ff:ff）
- RARP应答是单播方式（第二行目标地址是8:0:20:3:f6:42)
- sun一收到IP就发送一个TFTP（简单文件传送协议）读请求（RRQ）给文件8CFC0D21.SUN4C，8CFC0D21表示主机sun的IP地址140.252.13.33 。IP地址在RARP应答中返回，文件名的后缀SUN4C表示被引导系统的类型。  
- 第三行指出IP数据报的长度是65个字节，而不是一个UDP数据报（实际上是一个UDP数据报）  
- 第二行中的以太网数据帧长度比最小长度小的原因是：在发送该以太网数据帧的系统（bsdi）上运行tcpdump命令，应用程序rarpd写42字节（14字节是以太网数据帧报头，28字节是RARP应答）到BSD分组过滤设备上，这是tcpdump收到的副本，但是以太网设备驱动程序要把这一短帧填充空白字符已达到最小传输长度（60），如果在其他系统上运行tcpdump命令，长度就是60.  



